<html>
    <head>
        <meta charset='utf-8'/>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" type="text/css"/>
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
        <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'>
            
        <link rel="stylesheet" href="css/main.css" type="text/css" />
        <script>
            ///////navigation stuff
            $("a[data-role=tab]").each(function () {
                                       var anchor = $(this);
                                       anchor.bind("click", function () {
                                                   $.mobile.changePage(anchor.attr("href"), {
                                                                       transition: "none",
                                                                       changeHash: false
                                                                       });
                                                   return false;
                                                   });
                                       });
            
            $("div[data-role=page]").bind("pagebeforeshow", function (e, data) {
                                          $.mobile.silentScroll(0);
                                          $.mobile.changePage.defaults.transition = 'slide';
                                          });
            
            ////////music list generation stuff
            function generateMovieLink(movie){
                return '<li><a href="javascript:void(0)" onclick="goToSongDetailPage(\''+ movie.title + '\',\'' + movie.stream_url + '\')">'+ movie.artist + " - " + movie.title + '</a></li>';
            }
        
            function goToSongDetailPage(songTitle, stream_url){
                
                var moviePage = $("<div data-role='page' data-url=songUrl> <img src='imgs/whitesmokebg.png' class='fullscreen'><div id='onbackground'><div data-role='header'><h1>" + songTitle + "</h1><a href='#trendingpage' data-icon='home' data-iconpos='notext'>search</a></div><div data-role='content'><a href='#' data-role='button' class='frontPageBtn'><p>Preview</p></a><a href='#' data-role='button' class='frontPageBtn'><p>Download</p></a></div></div></div>");
                
                

                
                moviePage.appendTo($.mobile.pageContainer);
                
                $.mobile.changePage( moviePage );
            }
            
            //http://jsonlint.com/
            $.ajax({
                   url: "http://new-host-2.home/musicApp/songs.json",
                   dataType: 'json',
                   success: function(movies){
                   // alert("token recieved: " + result.token);
                   
                   //Start of with empty list each time to get latest from server
                   $("#songList").empty();
                   
                   //add the movie items as List
                   $.each(movies, function(i, movie){
                          $('#songList').append(generateMovieLink(movie));
                          });
                   
                   $('#trendList').html($('#songList').html());
                 //  $('#libraryList').html($('#songList').html());
                   //refresh the list view to show the latest changes
                   $('#songList').listview('refresh');
                   $('#trendList').listview('refresh');
                //   $('#libraryList').listview('refresh');
                   
                   },
                   error: function(request, textStatus, errorThrown) {
                   alert(textStatus);
                   },
                   complete: function(request, textStatus) { //for additional info
                   }
                   });
        </script>
         
    </head>
    
    <body>
        <div id="home" data-role="page">
            <div data-role="content">
              <img src="imgs/whitesmokebg.png" class="fullscreen">
                    
              <div id="onbackground">
                <h1 id='maintitle'> Music Naija </h1>

                <a href="#searchpage" data-role="button" data-shadow="false" data-theme="b" class="frontPageBtn"><p>search</p></a>
                <a href="#trendingpage" data-role="button" data-shadow="false" data-theme="b" class="frontPageBtn"><p>trending</p></a>
                <a href="#librarypage" data-role="button" data-shadow="false" data-theme="b" class="frontPageBtn"><p>my library</p></a>
                <hr/>
                <p style="text-align:center; font-size:15px;"> &copy; 2013 xelaApps </p>
              </div>
            </div>
        </div> <!--page-->
        
        <div id="searchpage" data-role="page">
            <article data-role="content">
                <img src="imgs/whitesmokebg.png" class="fullscreen">
                
                <div id="onbackground">
                    <ul data-role="listview" data-filter='true' data-inset='true' data-filter-reveal="true" data-filter-placeholder="SONG ARTISTS OR ALBUM"  id='songList'>
                    </ul>
                     
                </div>
                   
            </article>
            <footer data-role="footer" data-position='fixed'>
                <nav data-role="navbar">
                    <ul>
                        <li><a href="#searchpage"><img src="imgs/globe_edit.png" alt="Great Britain" class="ui-li-icon footer-icon2"><br/>Search</a></li>
                        <li><a href="#trendingpage"><img src="imgs/headphones_edit.png" alt="Great Britain" class="ui-li-icon footer-icon2"><br/>Trending</a></li>
                        <li><a href="#librarypage"><img src="imgs/music-icon_edit.png" alt="Great Britain" class="ui-li-icon footer-icon2"><br/>My Library</a></li>
                    </ul>
                </nav>
            </footer>
        </div> <!--page-->
        <div id="trendingpage" data-role="page">
            <article data-role="content">
                <img src="imgs/whitesmokebg.png" class="fullscreen">
                    
                    <div id="onbackground">
                        <ul data-role="listview" data-filter='true' data-inset='true' data-filter-placeholder="SONG ARTISTS OR ALBUM" id='trendList'>
                        </ul>
                    </div>
                    </article>
            <footer data-role="footer" data-position='fixed'>
                <nav data-role="navbar">
                    <ul>
                        <li><a href="#searchpage"><img src="imgs/globe_edit.png" alt="Great Britain" class="ui-li-icon footer-icon2"><br/>Search</a></li>
                        <li><a href="#trendingpage"><img src="imgs/headphones_edit.png" alt="Great Britain" class="ui-li-icon footer-icon2"><br/>Trending</a></li>
                        <li><a href="#librarypage"><img src="imgs/music-icon_edit.png" alt="Great Britain" class="ui-li-icon footer-icon2"><br/>My Library</a></li>
                    </ul>
                </nav>
            </footer>
        </div> <!--page-->
        <div id="librarypage" data-role="page">
            <article data-role="content">
                <img src="imgs/whitesmokebg.png" class="fullscreen">
                    
                    <div id="onbackground">
                        <ul data-role="listview" data-filter='true' data-inset='true' data-filter-placeholder="SONG ARTISTS OR ALBUM" id='libraryList'>
                        </ul>
                        <a href="#home">temp homescreen</a>
                    </div>
                    </article>
            <footer data-role="footer" data-position='fixed'>
                <nav data-role="navbar">
                    <ul>
                        <li><a href="#searchpage"><img src="imgs/globe_edit.png" alt="Great Britain" class="ui-li-icon footer-icon2"><br/>Search</a></li>
                        <li><a href="#trendingpage"><img src="imgs/headphones_edit.png" alt="Great Britain" class="ui-li-icon footer-icon2"><br/>Trending</a></li>
                        <li><a href="#librarypage"><img src="imgs/music-icon_edit.png" alt="Great Britain" class="ui-li-icon footer-icon2"><br/>My Library</a></li>
                    </ul>
                </nav>
            </footer>
        </div> <!--page-->
        
        <!--<li><a href="#"><img src="imgs/globe.png" alt="Great Britain" class="ui-li-icon">Great Britain</a></li>-->
        <div id="searchpage2" data-role="page">
            <div data-role="header">
                <a href="#" data-icon="arrow-l" data-iconpos="left" data-rel="back" data-transition="slide" data-direction="reverse">Back</a>
                <h1>Page 1</h1>
            </div>
            <div data-role="content">
                <p>Page 1 content</p>
            </div>
            <div data-role="footer" data-position="fixed">
                <div data-role="navbar">
                    <ul>
                        <li><a href="#page-1" data-role="tab" data-icon="grid" class="ui-btn-active">Page 1</a></li>
                        <li><a href="#page-2" data-role="tab" data-icon="grid">Page 2</a></li>
                        <li><a href="#page-3" data-role="tab" data-icon="grid">Page 3</a></li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div id="page-2" data-role="page">
            <div data-role="header">
                <a href="#" data-icon="arrow-l" data-iconpos="left" data-rel="back" data-transition="slide" data-direction="reverse">Back</a>
                <h1>Page 2</h1>
            </div>
            <div data-role="content">
                <p>Page 2 content</p>
            </div>
            <div data-role="footer" data-position="fixed">
                <div data-role="navbar">
                    <ul>
                        <li><a href="#page-1" data-role="tab" data-icon="grid">Page 1</a></li>
                        <li><a href="#page-2" data-role="tab" data-icon="grid" class="ui-btn-active">Page 2</a></li>
                        <li><a href="#page-3" data-role="tab" data-icon="grid">Page 3</a></li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div id="page-3" data-role="page">
            <div data-role="header">
                <a href="#" data-icon="arrow-l" data-iconpos="left" data-rel="back" data-transition="slide" data-direction="reverse">Back</a>
                <h1>Page 3</h1>
            </div>
            <div data-role="content">
                <p>Page 3 content</p>
            </div>
            <div data-role="footer" data-position="fixed">
                <div data-role="navbar">
                    <ul>
                        <li><a href="#page-1" data-role="tab" data-icon="grid">Page 1</a></li>
                        <li><a href="#page-2" data-role="tab" data-icon="grid">Page 2</a></li>
                        <li><a href="#page-3" data-role="tab" data-icon="grid" class="ui-btn-active">Page 3</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </body>
    
</html>